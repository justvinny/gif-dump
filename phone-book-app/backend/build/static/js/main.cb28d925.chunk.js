(this["webpackJsonpphone-book-app-frontend"]=this["webpackJsonpphone-book-app-frontend"]||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),r=n(4),a=n(3),u=(n(23),n(2)),s=n(6),i=n.n(s),l={getAllContacts:function(){return i.a.get("/api/persons").then((function(e){return e.data}))},addNewContact:function(e){return i.a.post("/api/persons",e).then((function(e){return e.data}))},deleteContact:function(e){return i.a.delete("/api/persons/".concat(e)).then((function(e){return e.data}))},updateNumber:function(e,t){return i.a.put("/api/persons/".concat(e),{number:t}).then((function(e){return e.data}))}},d=n(0),j=function(e){var t=e.contacts,n=e.setContacts,c=e.dialogMsg,o=e.setDialogMsg,s=Object(u.useState)(""),i=Object(r.a)(s,2),j=i[0],b=i[1],f=Object(u.useState)(""),m=Object(r.a)(f,2),h=m[0],O=m[1],g=function(e){o(Object(a.a)(Object(a.a)({},c),{},{good:e})),new Promise((function(e,t){setTimeout((function(){o({good:"",error:""}),e("ok")}),5e3)})).catch((function(e){return console.log(e)}))},p=function(e){o(Object(a.a)(Object(a.a)({},c),{},{error:"".concat(e)})),new Promise((function(e,t){setTimeout((function(){o({good:"",error:""}),e("ok")}),5e3)})).catch((function(e){return console.log(e)}))},x=function(){b(""),O("")},v=function(e){return function(t){e(t.target.value)}};return Object(d.jsxs)("section",{children:[Object(d.jsx)("h2",{children:"Add New Contact"}),Object(d.jsxs)("form",{className:"contactInput",onSubmit:function(e){if(e.preventDefault(),j&&h)if(t.some((function(e){return e.name===j}))){if(window.confirm("Are you sure you want to update number?")){var c=t.find((function(e){return e.name===j})).id;c&&l.updateNumber(c,h).then((function(e){n(e)})).then((function(){x(),g("Successfully updated number for ".concat(j))}))}}else{var o={name:j,number:h};l.addNewContact(o).then((function(e){n(e),x(),g("Successfully added ".concat(j))})).catch((function(e){return console.log(e)}))}else j?h||p("Number must not be empty!"):p("Name must not be empty!")},children:[Object(d.jsxs)("label",{children:["Name ",Object(d.jsx)("input",{placeholder:"Name",value:j,onChange:v(b)})]}),Object(d.jsxs)("label",{children:["Number ",Object(d.jsx)("input",{placeholder:"Number",value:h,onChange:v(O)})]}),Object(d.jsx)("button",{type:"submit",children:"Add"})]})]})},b=function(e){var t=e.filterName,n=e.setFilterName;return Object(d.jsx)("section",{children:Object(d.jsxs)("label",{children:["Filter shown with ",Object(d.jsx)("input",{placeholder:"e.g. Arto",value:t,onChange:function(e){n(e.target.value)}})]})})},f=n(18),m=function(e){var t=e.name,n=e.number;return Object(d.jsxs)("p",{children:[t," ",n]})},h=function(e){var t=e.contacts,n=e.setContacts,c=e.dialogMsg,o=e.setDialogMsg;return Object(d.jsxs)("section",{children:[Object(d.jsx)("h2",{children:"Saved Contacts"}),t.map((function(e){return Object(d.jsxs)("div",{className:"contact",children:[Object(d.jsx)(m,{name:e.name,number:e.number}),Object(d.jsx)("button",{onClick:(r=e.name,function(e){if(e.preventDefault(),window.confirm("Are you sure you want to delete the contact ".concat(r,"?"))){var u=t.find((function(e){return e.name===r})).id;l.deleteContact(u).then((function(e){n(Object(f.a)(t).filter((function(e){return e.id!==u}))),o(Object(a.a)(Object(a.a)({},c),{},{good:"Successfully deleted ".concat(r)}))})).then((function(){setTimeout((function(){o({good:"",error:""})}),5e3)}))}}),children:"Delete"})]},e.name+e.number);var r}))]})},O=(n(43),function(e){var t=e.dialogMsg,n=t.good,c=t.error;return n?Object(d.jsx)("h2",{className:"dialogMsg",children:n}):c?Object(d.jsx)("h2",{className:"errorMsg",children:c}):Object(d.jsx)(d.Fragment,{})}),g=function(){var e=Object(u.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(""),a=Object(r.a)(o,2),s=a[0],i=a[1],f=Object(u.useState)({good:"",error:""}),m=Object(r.a)(f,2),g=m[0],p=m[1];Object(u.useEffect)((function(){l.getAllContacts().then((function(e){return c(e)})).catch((function(e){return console.log(e)}))}),[]);var x=n.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)("h1",{children:"Phonebook"})}),Object(d.jsxs)("main",{children:[Object(d.jsx)(O,{dialogMsg:g}),Object(d.jsx)(b,{filterName:s,setFilterName:i}),Object(d.jsx)(j,{contacts:n,setContacts:c,dialogMsg:g,setDialogMsg:p}),Object(d.jsx)(h,{contacts:x,setContacts:c,dialogMsg:g,setDialogMsg:p})]})]})};o.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cb28d925.chunk.js.map